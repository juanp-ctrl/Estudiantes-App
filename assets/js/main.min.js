let ele2,ele,menu,v_login,v_home,entrar,cerrar,val,opcion,valores2,vistas=[],categorias=[],path=window.location.pathname,arr=path.split("/"),page=arr.pop(),page2=arr.pop();function cargarVistas(){let e=sessionStorage.getItem("sesion");if(0==e||null==e){for(let e=0;e<vistas.length;e++)vistas[e].classList.add("hide");vistas[0].classList.remove("hide"),document.getElementById("Registrar").addEventListener("click",vistaRegistro),entrar=document.getElementById("Entrar").addEventListener("click",iniciarSesion),cerrar=document.getElementById("cerrar_s").addEventListener("click",cerrarSesion)}else 1==e&&vistaHome()}function vistaRegistro(){document.getElementById("boton_regist").addEventListener("click",validacion);for(let e=0;e<vistas.length;e++)vistas[e].classList.add("hide");vistas[2].classList.remove("hide")}function vistaHome(){sessionStorage.setItem("sesion",1);for(let e=0;e<vistas.length;e++)vistas[e].classList.add("hide");vistas[1].classList.remove("hide"),cerrar=document.getElementById("cerrar_s").addEventListener("click",cerrarSesion)}function cerrarSesion(){toggleMenu(),document.getElementById("body-overlay2").classList.add("menu-open"),document.getElementById("recuadro_s").classList.add("active"),document.getElementById("entendido").addEventListener("click",cerrarRecuadro)}function cerrarRecuadro(){document.getElementById("recuadro_s").classList.remove("active"),document.getElementById("body-overlay2").classList.remove("menu-open"),sessionStorage.setItem("sesion",0),"index.html"===page?cargarVistas():document.location="index.html"}function toggleMenu(){hasClass(ele,"menu-open")?ele.classList.remove("menu-open"):ele.classList.add("menu-open"),hasClass(menu,"menu-open")?menu.classList.remove("menu-open"):menu.classList.add("menu-open")}function init(){document.getElementById("open-menu").addEventListener("click",toggleMenu),document.getElementById("body-overlay").addEventListener("click",toggleMenu)}function hasClass(e,t){return!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function cargarCategorias(){opcion=document.getElementById("opciones").selectedOptions[0].value;for(let e=0;e<categorias.length;e++)if(valor=categorias.at(e).item(1).id,opcion!=valor){valores2=document.getElementsByName(valor);for(let e=0;e<valores2.length;e++)valores2[e].classList.add("close")}else{valores2=document.getElementsByName(valor);for(let e=0;e<valores2.length;e++)valores2[e].classList.remove("close")}}document.addEventListener("readystatechange",(function(){if("complete"===document.readyState)if(ele2=document.getElementsByTagName("div")[0],ele=ele2.getElementsByTagName("div")[0],menu=document.getElementsByTagName("nav")[0],init(),"apuntes.html"===page||"/App-movil-en-web/apuntes.html"===path){opcion=document.getElementById("opciones").selectedOptions[0].value;for(let e=0;e<4;e++){let t=document.getElementById("enlace"+(e+1)).childNodes;categorias.push(t)}cargarCategorias(),document.getElementById("opciones").addEventListener("change",cargarCategorias),cerrar=document.getElementById("cerrar_s").addEventListener("click",cerrarSesion)}else"index.html"===page||"/App-movil-en-web/"===path?(v_login=document.getElementById("vista_login"),v_home=document.getElementById("vista_home"),v_registro=document.getElementById("vista_registro"),vistas.push(v_login),vistas.push(v_home),vistas.push(v_registro),cargarVistas()):cerrar=document.getElementById("cerrar_s").addEventListener("click",cerrarSesion)}));let valido,valores=[];function validacion(){valido=!0,valores.push(document.getElementById("nombre").value),valores.push(document.getElementById("correo2").value),valores.push(document.getElementById("universidad").value),valores.push(document.getElementById("carrera").value),valores.push(document.getElementById("monitor").value),valores.push(document.getElementById("password2").value);for(let e=0;e<valores.length;e++)if(""==valores[e]){valido=!1;break}1==valido?localStorage.getItem(correo2)?(alert("Usted ya se encuentra registrado"),cargarVistas()):registro():(alert("Por favor completa todos los campos"),valores=[])}function registro(){var e=document.getElementById("nombre").value,t=document.getElementById("correo2").value,a=document.getElementById("universidad").value,o=document.getElementById("carrera").value,n=document.getElementById("password2").value,s=document.getElementById("formulario"),r={nombre:e,correo:t,universidad:a,carrera:o,password:n};localStorage.setItem(r.correo,JSON.stringify(r)),console.log(r),s.reset(),alert("Registro exitoso. Bienvenido a EstudiantesApp"),vistaHome()}function iniciarSesion(){let e=document.getElementById("email").value,t=document.getElementById("password").value;if(""!=e){let a=JSON.parse(localStorage.getItem(e));null!=a&&e==a.correo&&t==a.password?(alert("Bienvenido "+a.nombre+" a EstudiantesApp"),vistaHome()):alert("Correo o contraseña incorrecta")}else alert("Ingresa primero un correo y contraseña")}